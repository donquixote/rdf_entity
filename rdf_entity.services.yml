services:
  entity.query.sparql:
    class: \Drupal\rdf_entity\Entity\Query\Sparql\QueryFactory
    arguments: ['@sparql_endpoint', '@entity_type.manager', '@sparql.graph_handler', '@sparql.field_handler']
    tags:
      - { name: backend_overridable }
  sparql_endpoint:
    class: Drupal\Driver\Database\sparql\Connection
    factory: ['Drupal\Core\Database\Database', getConnection]
    arguments: [default, sparql_default]
  webprofiler.sparql:
    class: \Drupal\rdf_entity\DataCollector\SparqlDataCollector
    arguments: ['@sparql_endpoint', '@config.factory']
    tags:
      - name: data_collector
        template: "@rdf_entity/Collector/sparql.html.twig"
        id: sparql
        title: Sparql
        priority: 60
  paramconverter.rdf_entity:
    class: \Drupal\rdf_entity\ParamConverter\RdfEntityConverter
    tags:
      # Use a higher priority than EntityConverter.
      - { name: paramconverter, priority: 6 }
    arguments: ['@entity.manager']
  route_processor_rdf:
    class: Drupal\rdf_entity\RouteProcessor\RouteProcessorRdf
    arguments: ['@current_route_match']
    tags:
      - { name: route_processor_outbound, priority: 200 }
  sparql.graph_handler:
    class: \Drupal\rdf_entity\RdfGraphHandler
    arguments: ['@entity_type.manager', '@event_dispatcher']
  sparql.field_handler:
    class: \Drupal\rdf_entity\RdfFieldHandler
    arguments: ['@entity_type.manager', '@entity_field.manager', '@event_dispatcher']
  plugin.manager.rdf_entity.id:
    class: Drupal\rdf_entity\RdfEntityIdPluginManager
    arguments: ['@container.namespaces', '@cache.discovery', '@module_handler', '@entity_type.manager']
  rdf_entity.rdf_entity_route_context:
    class: Drupal\rdf_entity\ContextProvider\RdfEntityRouteContext
    arguments: ['@current_route_match']
    tags:
      - { name: 'context_provider' }
  rdf_entity.inbound_value.datetime.subscriber:
    class: Drupal\rdf_entity\EventSubscriber\InboundValueDateTimeSubscriber
    tags:
      - { name: event_subscriber }
  rdf_entity.outbound_value.datetime.subscriber:
    class: Drupal\rdf_entity\EventSubscriber\OutboundValueDateTimeSubscriber
    tags:
      - { name: event_subscriber }
  rdf_entity.inbound_value.translatable_literal.subscriber:
    class: Drupal\rdf_entity\EventSubscriber\InboundValueTranslatableLiteralSubscriber
    arguments: ['@typed_data_manager']
    tags:
      - { name: event_subscriber }
  rdf_entity.serializer:
    class: Drupal\rdf_entity\SparqlSerializer
    arguments: ['@sparql_endpoint', '@sparql.graph_handler']
  rdf_entity.encoder_base:
    abstract: true
    class: Drupal\rdf_entity\Encoder\SparqlEncoder
  rdf_entity.encoder.jsonld:
    parent: rdf_entity.encoder_base
    tags:
      - { name: encoder, format: jsonld }
  rdf_entity.encoder.rdfxml:
    parent: rdf_entity.encoder_base
    tags:
      - { name: encoder, format: rdfxml }
  rdf_entity.encoder.ntriples:
    parent: rdf_entity.encoder_base
    tags:
      - { name: encoder, format: ntriples }
  rdf_entity.encoder.turtle:
    parent: rdf_entity.encoder_base
    tags:
      - { name: encoder, format: turtle }
  rdf_entity.encoder.n3:
    parent: rdf_entity.encoder_base
    tags:
      - { name: encoder, format: n3 }
  rdf_entity.sparql_entity_normalizer:
    class: Drupal\rdf_entity\Normalizer\SparqlEntityNormalizer
    arguments: ['@rdf_entity.serializer', '@entity_type.manager']
    tags:
      - { name: normalizer, priority: 10 }
  rdf_entity.rdf_content_type.subscriber:
    class: Drupal\rdf_entity\EventSubscriber\RdfContentTypesSubscriber
    tags:
      - { name: event_subscriber }
